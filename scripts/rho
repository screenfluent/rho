#!/usr/bin/env bash
# rho (legacy wrapper) â€” delegate to the Node.js CLI
#
# This repo ships a real `rho` CLI in cli/index.ts (Node, ESM).
# When installed via ./install.sh (local clone), we keep this wrapper
# so users still get a `rho` command on PATH.

set -euo pipefail

# Source rho config (written by install.sh)
if [ -f "$HOME/.config/rho/config" ]; then
  # shellcheck disable=SC1090
  . "$HOME/.config/rho/config"
fi

RHO_DIR="${RHO_DIR:-$HOME/projects/rho}"
CLI="$RHO_DIR/cli/index.ts"

if [ ! -f "$CLI" ]; then
  echo "Error: rho CLI not found at $CLI"
  echo "If you installed from a local clone, ensure RHO_DIR is correct in ~/.config/rho/config"
  exit 1
fi

exec node --experimental-strip-types "$CLI" "$@"
