#!/usr/bin/env bash
# Trigger a rho check-in in the running daemon

# Source rho config
if [ -f "$HOME/.config/rho/config" ]; then
  . "$HOME/.config/rho/config"
fi
RHO_DIR="${RHO_DIR:-$HOME/projects/rho}"
RHO_PLATFORM="${RHO_PLATFORM:-unknown}"

SESSION_NAME="rho"

if ! tmux has-session -t "$SESSION_NAME" 2>/dev/null; then
    echo "Rho not running. Starting..."
    rho-daemon &
    exit 1
fi

# Send rho check-in command to pi
tmux send-keys -t "$SESSION_NAME" '/rho now' Enter

# Show notification
tmux display-message -t "$SESSION_NAME" "Rho check-in triggered" 2>/dev/null || true
